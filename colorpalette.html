<!doctype html>
<html lang="ko" data-theme="light">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ëœë¤ ìƒ‰ìƒ íŒ”ë ˆíŠ¸ ìƒì„±ê¸° | Tool Box</title>
  <meta name="description" content="ë””ìì´ë„ˆë¥¼ ìœ„í•œ ì¡°í™”ë¡œìš´ ëœë¤ íŒ”ë ˆíŠ¸ ìƒì„±ê¸°. ìƒ‰ìƒ ê³„ì—´Â·ëŠë‚ŒÂ·ì¡°í™” ë°©ì‹ì„ ì„ íƒí•˜ê³  3~10ê°œì˜ ìƒ‰ìƒì„ ì¦‰ì‹œ ë§Œë“¤ì–´ìš”." />
  <link rel="stylesheet" href="styles.css" />
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='0.9em' font-size='80'>ğŸ¨</text></svg>">

  <style>
    /* --- ì¶”ê°€ ë³´ì¡° ìŠ¤íƒ€ì¼ (styles.cssì™€ ì¶©ëŒ ì—†ìŒ) --- */
    .toolbar{display:flex;gap:10px;flex-wrap:wrap;align-items:end}
    .countbox{display:flex;gap:6px;align-items:center}
    .countbox .btn{width:40px}
    .swatches{display:grid;grid-template-columns:repeat(5,1fr);gap:12px;margin-top:14px}
    @media (max-width:760px){.swatches{grid-template-columns:repeat(2,1fr)}}
    .swatch{
      position:relative;height:120px;border-radius:14px;border:1px solid var(--line);
      display:flex;align-items:flex-end;justify-content:space-between;padding:10px 10px;
      cursor:pointer;transition:transform .08s ease; user-select:none;
    }
    .swatch:hover{transform:translateY(-2px);box-shadow:var(--shadow)}
    .swatch .label{background:rgba(255,255,255,.85);border:1px solid var(--line);border-radius:10px;padding:6px 8px;font-size:12px}
    .codepop{
      position:absolute;left:10px;right:10px;bottom:10px;display:none;flex-direction:column;gap:6px
    }
    .swatch.active .codepop{display:flex}
    .code{
      display:flex;justify-content:space-between;align-items:center;gap:8px;
      background:rgba(255,255,255,.92);border:1px solid var(--line);border-radius:10px;padding:6px 8px;font-size:12px
    }
    .code .copy{border:1px solid var(--line);border-radius:8px;padding:4px 6px;background:#fff;cursor:pointer}
    .chips.helper{margin-top:8px}
  </style>
</head>
<body>
  <div class="wrap">
    <header class="app-header">
      <a class="brand" href="/" aria-label="Tool Box í™ˆ">
        <div class="logo"><span class="logo-text">Tool<br>Box</span></div>
      </a>
      <div class="title">
        <h1>ëœë¤ ìƒ‰ìƒ íŒ”ë ˆíŠ¸ ìƒì„±ê¸°</h1>
        <p>ìƒ‰ìƒ ê³„ì—´Â·ëŠë‚ŒÂ·ì¡°í™” ë°©ì‹ìœ¼ë¡œ **ì¡°í™”ë¡œìš´** íŒ”ë ˆíŠ¸ë¥¼ ë¹ ë¥´ê²Œ</p>
      </div>
    </header>

    <main>
      <section class="card center" style="width:100%">
        <h2>ì„¤ì •</h2>

        <div class="toolbar">
          <div class="field" style="min-width:160px">
            <label for="family">ìƒ‰ìƒ ê³„ì—´</label>
            <select id="family">
              <option value="auto">ìë™(ëœë¤)</option>
              <option value="warm">ì›œ(Warm)</option>
              <option value="cool">ì¿¨(Cool)</option>
              <option value="red">ë ˆë“œ</option>
              <option value="orange">ì˜¤ë Œì§€</option>
              <option value="yellow">ì˜ë¡œ</option>
              <option value="green">ê·¸ë¦°</option>
              <option value="teal">í‹¸</option>
              <option value="blue">ë¸”ë£¨</option>
              <option value="purple">í¼í”Œ</option>
              <option value="pink">í•‘í¬</option>
              <option value="neutral">ë‰´íŠ¸ëŸ´(ë¬´ì±„)</option>
            </select>
          </div>

          <div class="field" style="min-width:160px">
            <label for="mood">ëŠë‚Œ(í†¤)</label>
            <select id="mood">
              <option value="auto">ìë™(ì¶”ì²œ)</option>
              <option value="pastel">íŒŒìŠ¤í…”</option>
              <option value="vivid">ë¹„ë¹„ë“œ</option>
              <option value="muted">ë®¤íŠ¸/ì†Œí”„íŠ¸</option>
              <option value="dark">ë”¥/ë‹¤í¬</option>
              <option value="neon">ë„¤ì˜¨</option>
            </select>
          </div>

          <div class="field" style="min-width:180px">
            <label for="scheme">ì¡°í™” ë°©ì‹</label>
            <select id="scheme">
              <option value="auto">ìë™(ì¶”ì²œ)</option>
              <option value="analogous">ìœ ì‚¬ìƒ‰(Analogous)</option>
              <option value="complement">ë³´ìƒ‰(Complementary)</option>
              <option value="triad">ì‚¼ê°ìƒ‰(Triad)</option>
              <option value="split">ë¶„í• ë³´ìƒ‰(Split-Comp.)</option>
              <option value="mono">ë‹¨ìƒ‰ ìŒì˜(Monochrome)</option>
            </select>
          </div>

          <div class="countbox">
            <label class="muted" for="count" style="margin-right:6px">ìƒ‰ìƒ ìˆ˜</label>
            <button class="btn" id="minus">â€“</button>
            <input id="count" type="number" value="5" min="3" max="10" style="width:64px;text-align:center" />
            <button class="btn" id="plus">+</button>
          </div>

          <button id="gen" class="btn primary">ìƒì„±í•˜ê¸°</button>
          <button id="refresh" class="btn">ìƒˆë¡œê³ ì¹¨</button>
        </div>

        <div class="chips helper">
          <span class="chip">íŒ: ì¹¸ì„ ëˆ„ë¥´ë©´ HEX/RGB/CMYKê°€ í¼ì³ì ¸ìš”</span>
          <span class="chip">ë³µì‚¬ ì•„ì´ì½˜ í´ë¦­ìœ¼ë¡œ ê°’ ë³µì‚¬</span>
        </div>

        <div id="grid" class="swatches" aria-live="polite" style="margin-top:6px"></div>
      </section>

      <section class="card center" style="width:100%;margin-top:18px">
        <h2>íŒ”ë ˆíŠ¸ ì„¤ëª…</h2>
        <p class="muted" style="margin:0">
          íŒ”ë ˆíŠ¸ëŠ” HSL ê³µê°„ì—ì„œ **ê¸°ì¤€ Hue**ë¥¼ ê³ ë¥¸ ë’¤, ì„ íƒí•œ <b>ì¡°í™” ë°©ì‹</b>ì— ë§ì¶° ê° ìƒ‰ì˜ Hue ê°„ê²©ì„ ë°°ì¹˜í•˜ê³ 
          <b>ëŠë‚Œ(í†¤)</b>ì— ë”°ë¼ Saturation/Lightness ë²”ìœ„ë¥¼ ì¡°ì •í•´ ìƒì„±í•©ë‹ˆë‹¤.
        </p>
      </section>
    </main>

    <footer><p>Â© <span id="year"></span> Tool Box</p></footer>
  </div>

  <script>
    // íˆ´ ê³µí†µ
    document.getElementById('year').textContent = new Date().getFullYear();

    // ===== ìœ í‹¸: HSL/HEX/RGB/CMYK =====
    const clamp=(v,min,max)=>Math.min(max,Math.max(min,v));
    function hslToRgb(h,s,l){
      h=(h%360+360)%360; s=clamp(s,0,100)/100; l=clamp(l,0,100)/100;
      const c=(1-Math.abs(2*l-1))*s, x=c*(1-Math.abs((h/60)%2-1)), m=l-c/2;
      let r=0,g=0,b=0;
      if(h<60){r=c;g=x}else if(h<120){r=x;g=c}
      else if(h<180){g=c;b=x}else if(h<240){g=x;b=c}
      else if(h<300){r=x;b=c}else{r=c;b=x}
      r=Math.round((r+m)*255); g=Math.round((g+m)*255); b=Math.round((b+m)*255);
      return {r,g,b};
    }
    const toHex=n=>n.toString(16).padStart(2,'0');
    function rgbToHex({r,g,b}){return '#'+toHex(r)+toHex(g)+toHex(b)}
    function rgbToCmyk({r,g,b}){
      const R=r/255,G=g/255,B=b/255;
      const K=1-Math.max(R,G,B);
      if(K===1) return {c:0,m:0,y:0,k:100};
      const C=((1-R-K)/(1-K))*100, M=((1-G-K)/(1-K))*100, Y=((1-B-K)/(1-K))*100, Kp=K*100;
      return {c:Math.round(C),m:Math.round(M),y:Math.round(Y),k:Math.round(Kp)};
    }

    // ===== íŒŒë¼ë¯¸í„° ë§µ =====
    const families={
      auto:   ()=>Math.random()*360,
      warm:   ()=>randRange(10,70),
      cool:   ()=>randRange(180,260),
      red:    ()=>randRange(350,15),
      orange: ()=>randRange(20,40),
      yellow: ()=>randRange(45,65),
      green:  ()=>randRange(90,150),
      teal:   ()=>randRange(160,180),
      blue:   ()=>randRange(200,230),
      purple: ()=>randRange(260,290),
      pink:   ()=>randRange(300,340),
      neutral:()=>randRange(0,360)
    };
    function randRange(a,b){ // a<=x<b (ê°ë„ ë© í¬í•¨)
      if(a<=b) return a+Math.random()*(b-a);
      const t=Math.random(); return (t<((360-a)/(360-a+b))) ? a+t*(360-a) : 0+(t-((360-a)/(360-a+b)))*(b);
    }

    const moods={
      auto:  ()=>({s:[40,80], l:[35,65]}),
      pastel:()=>({s:[20,45], l:[70,88]}),
      vivid: ()=>({s:[70,95], l:[45,60]}),
      muted: ()=>({s:[15,35], l:[45,70]}),
      dark:  ()=>({s:[35,70], l:[20,38]}),
      neon:  ()=>({s:[85,100], l:[55,65]})
    };

    const schemes={
      auto:(n)=>pickRandomScheme(n),
      analogous:(n)=>spreadSteps(n, 20),
      complement:(n)=>mirrorAround(180, n),
      triad:(n)=>cyclic([0,120,240], n),
      split:(n)=>cyclic([0,150,210], n),
      mono:(n)=>Array.from({length:n},()=>0)
    };

    function pickRandomScheme(n){
      const keys=['analogous','complement','triad','split','mono'];
      return schemes[keys[Math.floor(Math.random()*keys.length)]](n);
    }
    function spreadSteps(n,gap){
      const half=Math.floor(n/2); const arr=[];
      for(let i=-half;i<=half;i++){ if(n%2===0 && i===0) continue; arr.push(i*gap); }
      return arr;
    }
    function mirrorAround(deg,n){
      if(n===1) return [0];
      const arr=[0,deg]; while(arr.length<n){ arr.push((deg/2)*(arr.length%2?1:-1)); }
      return arr.slice(0,n);
    }
    function cyclic(points,n){
      const res=[]; for(let i=0;i<n;i++){ res.push(points[i%points.length] + 0); } return res;
    }

    // ===== ìƒì„± ë¡œì§ =====
    const grid=document.getElementById('grid');
    const familySel=document.getElementById('family');
    const moodSel=document.getElementById('mood');
    const schemeSel=document.getElementById('scheme');
    const countInput=document.getElementById('count');

    let seedHue = 0;

    function generate(refresh=false){
      // count
      let n=clamp(parseInt(countInput.value||'5',10),3,10); countInput.value=n;

      // seed
      if(refresh || seedHue===null){ seedHue = families[familySel.value](); }
      else if(familySel.value!=='auto' && refresh){ seedHue = families[familySel.value](); }

      // mood
      const {s:[sMin,sMax], l:[lMin,lMax]} = moods[moodSel.value]();

      // scheme offsets
      const offs = schemes[schemeSel.value](n);

      // build colors
      const colors = offs.map(off=>{
        const h = (seedHue + off + 360) % 360;
        const s = Math.round(randRange(sMin,sMax));
        const l = Math.round(randRange(lMin,lMax));
        const rgb = hslToRgb(h,s,l);
        const hex = rgbToHex(rgb);
        const cmyk = rgbToCmyk(rgb);
        return {h,s,l,hex,rgb,cmyk};
      });

      render(colors, n);
    }

    function render(colors){
      // ê·¸ë¦¬ë“œ ì»¬ëŸ¼ ë§ì¶¤
      const cols = Math.min(colors.length,5);
      grid.style.gridTemplateColumns = `repeat(${cols},1fr)`;
      grid.innerHTML='';
      colors.forEach((c,idx)=>{
        const el=document.createElement('div');
        el.className='swatch';
        el.style.backgroundColor=c.hex;
        el.setAttribute('role','button');
        el.setAttribute('aria-label',`ìƒ‰ìƒ ${idx+1} ${c.hex}`);
        el.innerHTML=`
          <span class="label">${c.hex.toUpperCase()}</span>
          <div class="codepop">
            <div class="code"><span>HEX</span><span>${c.hex.toUpperCase()}</span><button class="copy" data-copy="${c.hex}">ë³µì‚¬</button></div>
            <div class="code"><span>RGB</span><span>rgb(${c.rgb.r}, ${c.rgb.g}, ${c.rgb.b})</span><button class="copy" data-copy="rgb(${c.rgb.r}, ${c.rgb.g}, ${c.rgb.b})">ë³µì‚¬</button></div>
            <div class="code"><span>CMYK</span><span>${c.cmyk.c}%, ${c.cmyk.m}%, ${c.cmyk.y}%, ${c.cmyk.k}%</span><button class="copy" data-copy="${c.cmyk.c}%, ${c.cmyk.m}%, ${c.cmyk.y}%, ${c.cmyk.k}%">ë³µì‚¬</button></div>
          </div>`;
        el.addEventListener('click',()=>{
          document.querySelectorAll('.swatch.active').forEach(s=>s.classList.remove('active'));
          el.classList.toggle('active');
        });
        grid.appendChild(el);
      });

      // ë³µì‚¬
      grid.querySelectorAll('.copy').forEach(b=>{
        b.addEventListener('click', (e)=>{
          e.stopPropagation();
          navigator.clipboard.writeText(b.dataset.copy);
          const old=b.textContent; b.textContent='âœ…'; setTimeout(()=>b.textContent=old,900);
        });
      });
    }

    // ì´ë²¤íŠ¸
    document.getElementById('gen').addEventListener('click', ()=>generate(true));
    document.getElementById('refresh').addEventListener('click', ()=>generate(true));
    familySel.addEventListener('change', ()=>generate(true));
    moodSel.addEventListener('change', ()=>generate());
    schemeSel.addEventListener('change', ()=>generate());
    document.getElementById('minus').addEventListener('click', ()=>{countInput.value=Math.max(3,parseInt(countInput.value||'5',10)-1); generate();});
    document.getElementById('plus').addEventListener('click', ()=>{countInput.value=Math.min(10,parseInt(countInput.value||'5',10)+1); generate();});
    countInput.addEventListener('change', ()=>generate());

    // ìµœì´ˆ
    seedHue = null;
    generate(true);
  </script>
</body>
</html>