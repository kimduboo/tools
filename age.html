<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ë§Œë‚˜ì´(ìƒí™œì—°ë ¹) ê³„ì‚°ê¸° | íˆ´ì„œë</title>
  <meta name="description" content="ìƒë…„ì›”ì¼ì„ ì…ë ¥í•˜ë©´ KST ê¸°ì¤€ìœ¼ë¡œ ë§Œë‚˜ì´(ìƒí™œì—°ë ¹)ë¥¼ ê³„ì‚°í•©ë‹ˆë‹¤. ë‹¤ìŒ ìƒì¼ê¹Œì§€ Dâ€‘Day, ì‚´ì•„ì˜¨ ë‚ , ê°œì›”ìˆ˜ í‘œê¸°(ì˜ˆ: 49ê°œì›” / 4ì„¸ 1ê°œì›” / 4;1) ì œê³µ." />

  <style>
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; padding:20px; color:#1f2937;
      font-family:system-ui,-apple-system,Segoe UI,Roboto,"Noto Sans KR",sans-serif;
      background-color:#fafafa; position:relative;
    }
    /* ê³ ì • ê·¸ë¼ë°ì´ì…˜ ë°°ê²½(ìŠ¤í¬ë¡¤í•´ë„ ëŠê¹€ ì—†ìŒ) */
    body::before{
      content:""; position:fixed; inset:0; z-index:-1;
      background:
        radial-gradient(1200px 600px at 80% -10%, #dbeafe 0%, rgba(219,234,254,0) 60%),
        linear-gradient(#fafafa,#eaeaea);
      background-repeat:no-repeat,no-repeat;
      background-size:cover,cover;
      background-position:center,center;
    }

    .container{max-width:560px;margin:0 auto;background:#fff;padding:20px;border-radius:14px;box-shadow:0 6px 20px rgba(2,8,23,.08)}
    .home-btn{display:inline-block;margin-bottom:10px;color:#2563eb;text-decoration:none;font-weight:700}
    h1{margin:0;text-align:center;font-size:22px}
    .hint{margin:6px 0 14px;text-align:center;color:#6b7280;font-size:13px}
    label{display:block;margin-top:12px;font-weight:700}

    /* ì…ë ¥ & ë²„íŠ¼ (Dâ€‘Dayì™€ ë™ì¼ ê³„ì—´) */
    input[type="text"]{width:100%;padding:12px;font-size:16px;border:2px solid #e5e7eb;border-radius:12px;margin-top:4px;background:#fff}
    input[type="text"]:focus{outline:none;border-color:#2563eb;box-shadow:0 0 0 4px rgba(37,99,235,.15)}
    .btn{display:inline-grid;place-items:center;padding:12px 14px;border-radius:12px;border:1px solid #e5e7eb;background:#fff;color:#1f2937;cursor:pointer;font-weight:700;font-size:14px}
    .btn:hover{filter:brightness(1.05)}
    .btn.small{padding:6px 8px;border-radius:10px;font-size:12px}
    .btn.primary{background:linear-gradient(135deg,#60a5fa,#2563eb);border-color:#2563eb;color:#fff}
    .actions{display:flex;gap:10px;margin-top:14px}

/*ê³„ì‚°í•˜ê¸°-ì´ˆê¸°í™” ë²„íŠ¼ë¹„ìœ¨*/
.actions{
  display:flex;
  gap:10px;
  margin-top:14px;
  flex-wrap:wrap;            /* í­ì´ ì¢ì•„ì§€ë©´ ìë™ ì¤„ë°”ê¿ˆ */
}

/* ê¸°ë³¸ì€ 2:1 ë¹„ìœ¨ ìœ ì§€ (grow:shrink:basis) */
.actions #calcBtn { flex: 2 1 0; min-width: 180px; }
.actions #resetBtn{ flex: 1 1 0; min-width: 120px; }

/* ì•„ì£¼ ì¢ì€ í™”ë©´ì—ì„œëŠ” ì„¸ë¡œë¡œ ìŒ“ê³  ê° ë²„íŠ¼ 100% í­ */
@media (max-width: 420px){
  .actions #calcBtn,
  .actions #resetBtn{
    flex: 1 1 100%;
  }
}



    /* ë‹¬ë ¥ ìœ„ì ¯ (Dâ€‘Day ë™ì¼) */
    .datebox{position:relative}
    .calbtn{position:absolute;right:6px;top:50%;transform:translateY(-50%);background:#fff;border:1px solid #e5e7eb;font-size:16px;cursor:pointer;border-radius:10px;padding:6px 10px}
    .picker{position:absolute;top:110%;left:0;right:0;background:#fff;border:1px solid #e5e7eb;border-radius:12px;padding:10px;box-shadow:0 10px 22px rgba(2,8,23,.1);z-index:10;display:none}
    .picker .cal-header{display:flex;align-items:center;justify-content:space-between;gap:8px;margin-bottom:6px}
    .picker .cal-title{flex:1;text-align:center;font-weight:800}
    .picker select{border:1px solid #e5e7eb;border-radius:8px;padding:6px 8px;background:#fff}
    .picker table{border-collapse:collapse;width:100%;font-size:14px}
    .picker th,.picker td{text-align:center;padding:8px;border-radius:8px;cursor:pointer}
    .picker th{color:#64748b;font-weight:700}
    .picker td:hover{background:#f1f5ff}

    /* ê²°ê³¼ ì˜ì—­: ì²˜ìŒì—” ìˆ¨ê¹€ â†’ ê³„ì‚°í•˜ê¸° í›„ ë…¸ì¶œ */
    .result-wrap{display:none;margin-top:16px}
    .headline{display:flex;gap:8px;align-items:center;justify-content:space-between;background:#eef2ff;border-radius:12px;padding:12px;font-size:20px;font-weight:800}
    .grid{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-top:12px}
    .kpi{display:flex;gap:8px;align-items:center;justify-content:space-between;border:1px dashed #e5e7eb;border-radius:12px;padding:12px;background:#fff}
    .note{margin-top:10px;color:#6b7280;font-size:12px}

    footer{margin:26px 0 0;text-align:center;color:#6b7280;font-size:14px}
    
  </style>
</head>
<body>
  <div class="container">
    <a href="/index.html" class="home-btn">â† íˆ´ì„œë í™ˆ</a>
    <h1>ë§Œë‚˜ì´(ìƒí™œì—°ë ¹) ê³„ì‚°ê¸°</h1>
    <p class="hint">í‘œê¸° ì˜ˆ: <b>ë§Œ 4ì„¸ / 49ê°œì›” / 4ì„¸ 1ê°œì›” / 4;1</b></p>

    <!-- ì…ë ¥ -->
    <label for="dob">ìƒë…„ì›”ì¼</label>
    <div class="datebox">
      <input id="dob" type="text" placeholder="YYYY-MM-DD" maxlength="10" inputmode="numeric" autocomplete="off" aria-describedby="dobHelp" />
      <button type="button" class="calbtn btn small" id="openCal" aria-label="ë‹¬ë ¥ ì—´ê¸°">ğŸ“…</button>
      <div id="picker" class="picker"></div>
      <div id="dobHelp" class="hint" style="margin:6px 0 0; text-align:left">ì˜ˆ: 20251209 â†’ ìë™ìœ¼ë¡œ 2025-12-09ë¡œ í¬ë§·ë©ë‹ˆë‹¤.</div>
    </div>

    <div class="actions">
        <button id="calcBtn" class="btn primary">ê³„ì‚°í•˜ê¸°</button>
        <button id="resetBtn" class="btn">ì´ˆê¸°í™”</button>
      </div>
      

    <!-- ê²°ê³¼ -->
    <section id="result" class="result-wrap" aria-live="polite">
      <div class="headline">
        <span id="ageMain">ë§Œ 0ì„¸</span>
        <button class="btn small" id="copyAge">ë³µì‚¬</button>
      </div>
      <div id="ageDetail" class="hint" style="text-align:left;margin:8px 0 0">-</div>

      <div class="grid">
        <div class="kpi"><span>ë‹¤ìŒ ìƒì¼ê¹Œì§€</span><b id="dday">-ì¼</b><button class="btn small" data-copy="dday">ë³µì‚¬</button></div>
        <div class="kpi"><span>ì‚´ì•„ì˜¨ ë‚ </span><b id="lived">-ì¼</b><button class="btn small" data-copy="lived">ë³µì‚¬</button></div>
      </div>

      <div class="kpi" style="margin-top:10px"><span>ì´ ê°œì›”</span><b id="ageMonths">-ê°œì›”</b><button class="btn small" data-copy="ageMonths">ë³µì‚¬</button></div>
      <div class="kpi"><span>ì„¸/ê°œì›”</span><b id="ageYearMonth">-ì„¸ -ê°œì›”</b><button class="btn small" data-copy="ageYearMonth">ë³µì‚¬</button></div>
      <div class="kpi"><span>ì„¸ë¯¸ì½œë¡ </span><b id="ageSemicolon">-;-</b><button class="btn small" data-copy="ageSemicolon">ë³µì‚¬</button></div>

      <p class="note">â€» ì°¸ê³ ìš© ì •ë³´ì…ë‹ˆë‹¤. ë²•ì Â·ì˜í•™ì  íŒë‹¨ì€ ê³µì‹ ë¬¸ì„œë¥¼ í™•ì¸í•˜ì„¸ìš”.</p>
    </section>
  </div>

  <footer><p>Â© <span id="year"></span> íˆ´ì„œë </p></footer>

  <script>
    // ===== ê³ ì •: KST ê¸°ë°˜ ë‚ ì§œ ìœ í‹¸ =====
    const KST = 'Asia/Seoul';
    const fmtNow = new Intl.DateTimeFormat('ko-KR',{timeZone:KST,year:'numeric',month:'2-digit',day:'2-digit',hour:'2-digit',minute:'2-digit'});
    const fmtYMD = new Intl.DateTimeFormat('en-CA',{timeZone:KST,year:'numeric',month:'2-digit',day:'2-digit'});
    function zonedYMD(dateLike){const [y,m,d]=fmtYMD.format(new Date(dateLike)).split('-').map(Number);return {y,m,d};}

    // ===== ì…ë ¥ í¬ë§·(ì—°ì† ìˆ«ì â†’ YYYY-MM-DD) =====
    const dobInput=document.getElementById('dob');
    function formatYMD(v){v=(v||'').replace(/\D/g,'').slice(0,8); if(v.length>4)v=v.slice(0,4)+'-'+v.slice(4); if(v.length>7)v=v.slice(0,7)+'-'+v.slice(7,9); return v;}
    dobInput.addEventListener('input',e=>{e.target.value=formatYMD(e.target.value); syncCalendarFromInput();});
    dobInput.addEventListener('blur',e=>{e.target.value=formatYMD(e.target.value);});

    // ===== Dâ€‘Day ë‹¬ë ¥ ìœ„ì ¯ ê·¸ëŒ€ë¡œ ì´ì‹ =====
    const picker=document.getElementById('picker');
    let calYear, calMonth; // 0~11
    function openPicker(){picker.style.display='block'; const {y,m}=getInputYMDOrToday(); calYear=y; calMonth=m-1; buildCalendar(calYear, calMonth);}
    function closePicker(){picker.style.display='none';}
    function getInputYMDOrToday(){const v=dobInput.value; if(/^\d{4}-\d{2}-\d{2}$/.test(v)){const [y,m,d]=v.split('-').map(Number); return {y,m,d};} return zonedYMD(new Date());}

    function buildCalendar(year,month){
      picker.innerHTML='';
      // í—¤ë”
      const header=document.createElement('div'); header.className='cal-header';
      const yearSelect=document.createElement('select');
      for(let y=year-50;y<=year+50;y++){const o=document.createElement('option');o.value=y;o.textContent=y;if(y===year)o.selected=true;yearSelect.appendChild(o);}
      const monthSelect=document.createElement('select');
      for(let m=0;m<12;m++){const o=document.createElement('option');o.value=m;o.textContent=m+1;if(m===month)o.selected=true;monthSelect.appendChild(o);}
      const left=document.createElement('div'); left.appendChild(yearSelect); left.appendChild(monthSelect);
      const title=document.createElement('div'); title.className='cal-title'; title.id='calTitle'; title.textContent=`${year}ë…„ ${String(month+1).padStart(2,'0')}ì›”`;
      const right=document.createElement('div'); right.style.width='1px';
      header.appendChild(left); header.appendChild(title); header.appendChild(right);
      picker.appendChild(header);

      // í‘œ
      const table=document.createElement('table');
      const days=['ì¼','ì›”','í™”','ìˆ˜','ëª©','ê¸ˆ','í† '];
      const thead=document.createElement('thead'); const tr=document.createElement('tr');
      days.forEach(d=>{const th=document.createElement('th'); th.textContent=d; tr.appendChild(th);});
      thead.appendChild(tr); table.appendChild(thead);

      const firstDay=new Date(year,month,1).getDay();
      const lastDate=new Date(year,month+1,0).getDate();
      const tbody=document.createElement('tbody'); let row=document.createElement('tr');
      for(let i=0;i<firstDay;i++) row.appendChild(document.createElement('td'));
      for(let d=1; d<=lastDate; d++){
        const td=document.createElement('td'); td.textContent=d;
        td.addEventListener('click',()=>{
          const mm=String(month+1).padStart(2,'0'); const dd=String(d).padStart(2,'0');
          dobInput.value=`${year}-${mm}-${dd}`; closePicker();
        });
        row.appendChild(td);
        if((firstDay+d)%7===0){tbody.appendChild(row); row=document.createElement('tr');}
      }
      tbody.appendChild(row); table.appendChild(tbody); picker.appendChild(table);

      const rerender=()=>{buildCalendar(parseInt(yearSelect.value,10), parseInt(monthSelect.value,10));};
      yearSelect.addEventListener('change',rerender);
      monthSelect.addEventListener('change',rerender);
    }

    document.getElementById('openCal').addEventListener('click',()=>{
      (picker.style.display==='block')? closePicker() : openPicker();
    });
    document.addEventListener('click',(e)=>{const box=document.querySelector('.datebox'); if(!box.contains(e.target)) closePicker();});
    function syncCalendarFromInput(){ if(picker.style.display==='block'){ const {y,m}=getInputYMDOrToday(); buildCalendar(y, m-1); } }

    // ===== ë§Œë‚˜ì´ ê³„ì‚° =====
    function calcAge(dobStr){
      if(!/^\d{4}-\d{2}-\d{2}$/.test(dobStr)) return null;
      const [by,bm,bd]=dobStr.split('-').map(Number);
      const {y:cy,m:cm,d:cd}=zonedYMD(new Date());

      let years=cy-by; if(cm<bm || (cm===bm && cd<bd)) years-=1;

      let months=(cy-by)*12 + (cm-bm); if(cd<bd) months-=1; if(months<0) months=0;
      const yPart=Math.floor(months/12), mPart=months%12;

      let nextY=cy; if(cm>bm || (cm===bm && cd>=bd)) nextY=cy+1;
      const nextBirthdayUTC=new Date(Date.UTC(nextY,bm-1,bd));
      const todayUTC=new Date(Date.UTC(cy,cm-1,cd));
      const daysToNext=Math.ceil((nextBirthdayUTC - todayUTC)/86400000);

      const birthUTC=new Date(Date.UTC(by,bm-1,bd));
      const daysLived=Math.floor((todayUTC - birthUTC)/86400000);

      return {years, months, yPart, mPart, daysToNext, daysLived};
    }

    // ===== ë Œë”/ë³µì‚¬ =====
    function showResult(dob){
      const r=calcAge(dob); if(!r){alert('ìƒë…„ì›”ì¼ì„ YYYY-MM-DD í˜•ì‹ìœ¼ë¡œ ì…ë ¥í•˜ì„¸ìš”.'); return;}
      const {years,months,yPart,mPart,daysToNext,daysLived}=r;
      document.getElementById('ageMain').textContent=`ë§Œ ${years}ì„¸`;
      document.getElementById('ageDetail').textContent=`${dob} ê¸°ì¤€ Â· í˜„ì¬ ì‹œê° ${fmtNow.format(new Date())} (KST)`;
      document.getElementById('dday').textContent = `${daysToNext}ì¼`;
      document.getElementById('lived').textContent = `${daysLived.toLocaleString('ko-KR')}ì¼`;
      document.getElementById('ageMonths').textContent = `${months}ê°œì›”`;
      document.getElementById('ageYearMonth').textContent = `${yPart}ì„¸ ${mPart}ê°œì›”`;
      document.getElementById('ageSemicolon').textContent = `${yPart};${mPart}`;
      document.getElementById('result').style.display='block';
    }

    function copyById(id){
      const txt=document.getElementById(id).textContent.trim();
      navigator.clipboard.writeText(txt).then(()=>{
        const btn = id==='ageMain' ? document.getElementById('copyAge') : document.querySelector(`[data-copy="${id}"]`);
        if(btn){ const old=btn.textContent; btn.textContent='âœ…'; setTimeout(()=>btn.textContent='ë³µì‚¬',900); }
      });
    }

    // ë²„íŠ¼ ì´ë²¤íŠ¸
    document.getElementById('calcBtn').addEventListener('click',()=>{ showResult(dobInput.value); });
    document.getElementById('resetBtn').addEventListener('click',()=>{
      dobInput.value=''; document.getElementById('result').style.display='none'; picker.style.display='none';
    });
    document.getElementById('copyAge').addEventListener('click',()=>copyById('ageMain'));
    document.querySelectorAll('[data-copy]').forEach(b=>b.addEventListener('click',()=>copyById(b.dataset.copy)));

    // ì´ˆê¸°
    document.getElementById('year').textContent=new Date().getFullYear();
  </script>
</body>
</html>
