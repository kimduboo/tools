<!doctype html>
<html lang="ko" data-theme="light">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>만나이(생활연령) 계산기 | 툴서랍</title>
  <meta name="description" content="생년월일을 입력하면 KST 기준으로 만나이, 다음 생일까지 D-Day, 살아온 날, 개월수 표기를 제공합니다." />
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6022794906780783" crossorigin="anonymous"></script>

  <style>
    :root{
      --bg:#f7f9fd; --panel:#ffffff; --line:#e6eaf2; --ink:#1f2a37; --muted:#6b7280; --acc:#2563eb;
      --shadow:0 10px 22px rgba(2,8,23,.08);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;color:var(--ink);font:16px/1.6 system-ui,-apple-system,Segoe UI,Roboto,"Noto Sans KR",Apple SD Gothic Neo,sans-serif;
      position:relative;background-color:#fafafa;
    }
    /* 고정 그라데이션 배경 */
    body::before{
      content:"";position:fixed;inset:0;z-index:-1;
      background:radial-gradient(1200px 600px at 80% -10%, #dbeafe 0%, transparent 60%), linear-gradient(#fafafa,#eaeaea);
      background-repeat:no-repeat,no-repeat;background-size:1600px 800px,auto;background-position:right -200px top -180px,0 0;
    }

    .wrap{max-width:960px;margin:0 auto;padding:24px;overflow:visible}

    /* 헤더: 로고(좌=홈 링크) | 타이틀(가운데) | 오른쪽은 빈 공간으로 균형 */
    header{display:grid;grid-template-columns:1fr auto 1fr;align-items:center;gap:12px;padding:6px 0 18px}
/* 좌측 로고 배지 */
a.brand{justify-self:start; text-decoration:none; color:inherit; display:flex; align-items:center;}
.logo{
  width:56px; height:56px; border-radius:16px;
  display:grid; place-items:center;
  background:linear-gradient(135deg,#60a5fa,#2563eb);
  box-shadow:0 10px 22px rgba(37,99,235,.25);
}
.logo .logo-text{
  color:#fff; font-weight:900; text-align:center;
  line-height:1.05; letter-spacing:-.2px; /* 글자 간격 살짝 조정 */
  font-size:15px;  /* 필요하면 14~16px 사이로 */
}    .title{justify-self:center;text-align:center}
    .title h1{margin:0;font-size:clamp(20px,3vw,28px)}
    .title p{margin:4px 0 0;color:var(--muted);font-size:14px}
    .spacer{justify-self:end} /* 오른쪽 균형용 빈 칸 */
/* 광고 슬롯(형식 X) */
.ad-slot {
  margin: 12px 0;
  padding: 0;              /* 안쪽 여백 제거 */
  background: transparent; /* 배경 투명 */
  border: none;            /* 테두리 제거 */
  border-radius: 0;        /* 모서리 둥글기 제거 */
  overflow: hidden;        /* 광고가 넘치면 숨김 */
}

/* 광고 크기를 부모에 맞게 축소 */
.ad-slot > ins.adsbygoogle {
  display:inline-block !important;
  max-width:100% !important;
  height:auto !important;
}

.ad-slot iframe {
  max-width:100% !important;
  height:auto !important;
}

    /* 입력은 가운데 60% */
    main{display:flex;flex-direction:column;align-items:center;gap:24px}
    .card{background:var(--panel);border:1px solid var(--line);border-radius:20px;box-shadow:var(--shadow);padding:20px;overflow:visible;width:60%}
    @media (max-width: 860px){ .card{width:100%} }
    .card h2{margin:0 0 12px;font-size:18px}
    .field{display:flex;flex-direction:column;gap:10px;margin:12px 0}
    label{font-weight:700}

    .datebox{position:relative}
    .datebox input{
      width:100%;background:#fff;color:var(--ink);border:2px solid var(--line);border-radius:14px;
      padding:16px 64px 16px 14px; /* 아이콘 공간 */
      outline:none;font-size:18px;letter-spacing:.5px
    }
    .datebox input:focus{border-color:var(--acc);box-shadow:0 0 0 4px rgba(37,99,235,.15)}
    .calbtn{
      position:absolute;right:8px;top:50%;transform:translateY(-50%);
      width:40px;height:40px;display:grid;place-items:center;border-radius:10px;border:0;background:transparent;cursor:pointer;line-height:0;
      font-size:20px;
    }
    .calbtn:focus-visible{outline:2px solid rgba(37,99,235,.45);outline-offset:2px}
    .picker{
      position:absolute;left:0;right:0;top:calc(100% + 8px);
      background:#fff;border:1px solid var(--line);border-radius:14px;box-shadow:var(--shadow);padding:10px;display:none;
      z-index:9999;max-height:70vh;overflow:auto
    }
    .picker.above{top:auto;bottom:calc(100% + 8px)}
    .picker .cal-header{display:flex;align-items:center;justify-content:space-between;gap:8px;margin-bottom:6px}
    .picker .cal-title{font-weight:800}
    .picker select{border:1px solid var(--line);border-radius:8px;padding:6px 8px;background:#fff}
    .navbtn{border:1px solid var(--line);background:#fff;border-radius:8px;padding:6px 10px;cursor:pointer}
    .picker table{width:100%;table-layout:fixed;border-collapse:separate;border-spacing:0}
    .picker th,.picker td{width:14.285%;text-align:center}
    .picker th{color:#64748b;font-weight:700;padding:8px 0}
    .picker td{cursor:pointer;height:40px;line-height:40px;border-radius:8px}
    .picker td:hover{background:#eef2ff}
    .picker td.empty{visibility:hidden}

    .btn{display:inline-grid;place-items:center;padding:12px 14px;border-radius:12px;border:1px solid var(--line);background:#fff;color:#000;cursor:pointer;font-weight:700;font-size:14px}
    .btn:hover{filter:brightness(1.05)}
    .btn.small{padding:6px 8px;border-radius:10px;font-size:12px}
    .btn.primary{background:linear-gradient(135deg,#60a5fa,#2563eb);border-color:#2563eb;color:#fff}
    .actions{display:flex;gap:10px;margin-top:14px;flex-wrap:wrap}
    .actions #calcBtn{flex:2 1 0;min-width:180px}
    .actions #resetBtn{flex:1 1 0;min-width:120px}
    @media (max-width:420px){.actions #calcBtn,.actions #resetBtn{flex:1 1 100%}}

    .result-wrap{display:none}
    .result{display:grid;gap:12px}
    .headline{display:flex;align-items:center;justify-content:space-between;background:#eef2ff;border-radius:12px;padding:12px;font-weight:800;font-size:20px}
    .kpi-line{display:flex;align-items:center;justify-content:space-between;border:1px dashed var(--line);border-radius:16px;padding:14px;background:#fff}
    .muted{color:#6b7280}

    footer{margin:24px 0 0;color:var(--muted);font-size:13px;text-align:center}
    .copyable{user-select:all}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <!-- 로고를 홈 링크로 -->
      <a class="brand" href="https://tools.joyful101.com/" aria-label="툴서랍 홈">
        <div class="logo" aria-hidden="true">
          <span class="logo-text">Tool<br>Box</span>
        </div>
      </a>
      <div class="title">
        <h1>만나이(생활연령) 계산기</h1>
        <p>결과 예: 만4세/49개월/4세1개월/4;1</p>
      </div>
      <div class="spacer" aria-hidden="true"></div>
    </header>

    <main>
      <!-- 입력 카드 -->
      <section class="card" aria-labelledby="calcTitle">
        <h2 id="calcTitle">입력</h2>

        <div class="field">
          <label for="dob">생년월일</label>
          <div class="datebox">
            <input id="dob" type="text" placeholder="YYYY-MM-DD" maxlength="10" inputmode="numeric" autocomplete="off" aria-describedby="dobHelp" />
            <button type="button" class="calbtn" id="openCal" aria-label="달력 열기">📅</button>
            <div class="picker" id="picker" role="dialog" aria-modal="false" aria-label="달력 선택기"></div>
            <div id="dobHelp" class="muted" style="font-size:12px;margin-top:6px">예: 20251209 → 2025-12-09로 자동 포맷</div>
          </div>
        </div>

        <div class="actions">
          <button id="calcBtn" class="btn primary">계산하기</button>
          <button id="resetBtn" class="btn">초기화</button>
        </div>
<p></p>
    <center>
        <div class=ad-slot id="adTop">
      <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6022794906780783"
          crossorigin="anonymous"></script>
     <!-- 중간 수평 디스플레이 -->
     <ins class="adsbygoogle"
          style="display:block"
          data-ad-client="ca-pub-6022794906780783"
          data-ad-slot="6135885040"
          data-ad-format="auto"
          data-full-width-responsive="true"></ins>
     <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
     </script>
        </div>
     </center>
      </section>

      <!-- 결과 카드 -->
      <section class="card result-wrap" id="resultWrap" aria-labelledby="resultTitle">
        <h2 id="resultTitle">결과</h2>
        <div class="result">
          <div class="muted" id="nowKst">현재 시각: -</div>

          <div class="headline">
            <span id="ageMain" class="copyable">만 - 세</span>
            <button class="btn small" id="copyAge">복사</button>
          </div>

          <div class="kpi-line">
            <span class="muted">다음 생일까지</span>
            <div style="display:flex;align-items:center;gap:10px;">
              <b id="dday">-일</b>
              <button class="btn small" data-copy="dday">복사</button>
            </div>
          </div>

          <div class="kpi-line">
            <span class="muted">살아온 날</span>
            <div style="display:flex;align-items:center;gap:10px;">
              <b id="lived">-일</b>
              <button class="btn small" data-copy="lived">복사</button>
            </div>
          </div>

          <div class="kpi-line">
            <span class="muted">총 개월</span>
            <div style="display:flex;align-items:center;gap:10px;">
              <b id="ageMonths">-개월</b>
              <button class="btn small" data-copy="ageMonths">복사</button>
            </div>
          </div>

          <div class="kpi-line">
            <span class="muted">세/개월</span>
            <div style="display:flex;align-items:center;gap:10px;">
              <b id="ageYearMonth">-세 -개월</b>
              <button class="btn small" data-copy="ageYearMonth">복사</button>
            </div>
          </div>

          <div class="kpi-line">
            <span class="muted">세미콜론</span>
            <div style="display:flex;align-items:center;gap:10px;">
              <b id="ageSemicolon">-;-</b>
              <button class="btn small" data-copy="ageSemicolon">복사</button>
            </div>
          </div>

          <div class="muted" style="font-size:12px">※ 참고용 정보입니다. 법적·의학적 판단이 필요한 경우 공식 문서를 확인하세요.</div>

          <div id="adMid"></div>
        </div>
      </section>
    </main>

    <footer><p>© <span id="year"></span> 툴서랍 </p></footer>
  </div>

  <script>
    // ===== KST 유틸 =====
    const KST='Asia/Seoul';
    const fmtNow=new Intl.DateTimeFormat('ko-KR',{timeZone:KST,year:'numeric',month:'2-digit',day:'2-digit',hour:'2-digit',minute:'2-digit'});
    const fmtYMD=new Intl.DateTimeFormat('en-CA',{timeZone:KST,year:'numeric',month:'2-digit',day:'2-digit'});
    function zonedYMD(d){ const [y,m,dd]=fmtYMD.format(new Date(d)).split('-').map(Number); return {y, m, d: dd}; }

    // ===== 입력 포맷 =====
    const dobInput=document.getElementById('dob');
    function formatYMD(v){ v=(v||'').replace(/\D/g,'').slice(0,8); if(v.length>4)v=v.slice(0,4)+'-'+v.slice(4); if(v.length>7)v=v.slice(0,7)+'-'+v.slice(7,9); return v; }
    dobInput.addEventListener('input',(e)=>{ e.target.value=formatYMD(e.target.value); syncCalendarFromInput(); });
    dobInput.addEventListener('blur',(e)=>{ e.target.value=formatYMD(e.target.value); });

    // ===== 달력 위젯 =====
    const picker=document.getElementById('picker');
    function getInputYMDOrToday(){ const v=dobInput.value; if(/^\d{4}-\d{2}-\d{2}$/.test(v)){const [y,m,d]=v.split('-').map(Number); return {y,m,d};} return zonedYMD(new Date()); }

    function buildCalendar(y,m0){
      picker.innerHTML='';
      const header=document.createElement('div'); header.className='cal-header';

      const yearSelect=document.createElement('select');
      for(let yy=y-60; yy<=y+20; yy++){const o=document.createElement('option'); o.value=yy; o.textContent=yy; if(yy===y)o.selected=true; yearSelect.appendChild(o);} 

      const monthSelect=document.createElement('select');
      for(let mm=0; mm<12; mm++){const o=document.createElement('option'); o.value=mm; o.textContent=mm+1; if(mm===m0)o.selected=true; monthSelect.appendChild(o);} 

      const left=document.createElement('div'); left.style.display='flex'; left.style.gap='6px';
      left.appendChild(yearSelect); left.appendChild(monthSelect);

      const mid=document.createElement('div'); mid.style.display='flex'; mid.style.alignItems='center'; mid.style.gap='8px'; mid.style.justifyContent='center'; mid.style.flex='1';
      const title=document.createElement('div'); title.className='cal-title'; title.textContent=`${y}년 ${String(m0+1).padStart(2,'0')}월`;
      const prevBtn=document.createElement('button'); prevBtn.type='button'; prevBtn.className='navbtn'; prevBtn.textContent='◀';
      const nextBtn=document.createElement('button'); nextBtn.type='button'; nextBtn.className='navbtn'; nextBtn.textContent='▶';
      mid.appendChild(prevBtn); mid.appendChild(title); mid.appendChild(nextBtn);

      header.appendChild(left); header.appendChild(mid);
      picker.appendChild(header);

      const table=document.createElement('table');
      const thead=document.createElement('thead'); const tr=document.createElement('tr');
      ['일','월','화','수','목','금','토'].forEach(d=>{const th=document.createElement('th'); th.textContent=d; tr.appendChild(th);});
      thead.appendChild(tr); table.appendChild(thead);

      const first=new Date(y,m0,1).getDay();
      const last=new Date(y,m0+1,0).getDate();
      const tbody=document.createElement('tbody'); let row=document.createElement('tr');

      for(let i=0;i<first;i++){ const td=document.createElement('td'); td.className='empty'; row.appendChild(td); }

      for(let d=1; d<=last; d++){
        const td=document.createElement('td'); td.textContent=d;
        td.addEventListener('click',(ev)=>{ ev.stopPropagation(); const mm=String(m0+1).padStart(2,'0'); const dd=String(d).padStart(2,'0'); dobInput.value=`${y}-${mm}-${dd}`; closePicker(); });
        row.appendChild(td);
        if((first+d)%7===0){tbody.appendChild(row); row=document.createElement('tr');}
      }
      while(row.children.length && row.children.length<7){ const td=document.createElement('td'); td.className='empty'; row.appendChild(td); }
      tbody.appendChild(row); table.appendChild(tbody); picker.appendChild(table);

      const rerender=()=>buildCalendar(parseInt(yearSelect.value,10), parseInt(monthSelect.value,10));
      yearSelect.addEventListener('change',rerender); monthSelect.addEventListener('change',rerender);
      prevBtn.addEventListener('click',(e)=>{ e.preventDefault(); e.stopPropagation(); let yy=parseInt(yearSelect.value,10), mm=parseInt(monthSelect.value,10); mm--; if(mm<0){mm=11; yy--;} yearSelect.value=yy; monthSelect.value=mm; buildCalendar(yy,mm); });
      nextBtn.addEventListener('click',(e)=>{ e.preventDefault(); e.stopPropagation(); let yy=parseInt(yearSelect.value,10), mm=parseInt(monthSelect.value,10); mm++; if(mm>11){mm=0; yy++;} yearSelect.value=yy; monthSelect.value=mm; buildCalendar(yy,mm); });
      picker.addEventListener('pointerdown',(e)=>e.stopPropagation(), { once:true });
    }

    function openPicker(){
      const {y,m}=getInputYMDOrToday(); buildCalendar(y, m-1);
      const box=document.querySelector('.datebox'); const rect=box.getBoundingClientRect();
      const spaceBelow=window.innerHeight-rect.bottom; const spaceAbove=rect.top;
      picker.classList.toggle('above', spaceBelow<320 && spaceAbove>spaceBelow);
      picker.style.display='block';
    }
    function closePicker(){ picker.style.display='none'; }
    document.getElementById('openCal').addEventListener('click',(e)=>{ e.stopPropagation(); picker.style.display==='block'? closePicker(): openPicker(); });
    document.addEventListener('pointerdown',(e)=>{ const box=document.querySelector('.datebox'); if(!box.contains(e.target)) closePicker(); });
    function syncCalendarFromInput(){ if(picker.style.display==='block'){ const {y,m}=getInputYMDOrToday(); buildCalendar(y, m-1); } }

    // ===== 만나이 계산 =====
    function calcAge(dobStr){
      if(!/^\d{4}-\d{2}-\d{2}$/.test(dobStr)) return null;

      const [by,bm,bd]=dobStr.split('-').map(Number);
      const {y:cy,m:cm,d:cd}=zonedYMD(new Date());

      const birthUTC = new Date(Date.UTC(by,bm-1,bd));
      const todayUTC = new Date(Date.UTC(cy,cm-1,cd));

      if (todayUTC < birthUTC){
        const daysToBirth = Math.ceil((birthUTC - todayUTC)/86400000);
        return { years:0, months:0, yPart:0, mPart:0, daysToNext:daysToBirth, daysLived:0 };
      }

      let years = cy - by;
      if (cm < bm || (cm === bm && cd < bd)) years -= 1;
      if (years < 0) years = 0;

      let months = (cy - by) * 12 + (cm - bm);
      if (cd < bd) months -= 1;
      if (months < 0) months = 0;

      const yPart = Math.floor(months / 12);
      const mPart = months % 12;

      let nextY = cy;
      if (cm > bm || (cm === bm && cd >= bd)) nextY = cy + 1;
      const nextBirthdayUTC = new Date(Date.UTC(nextY, bm-1, bd));
      const daysToNext = Math.ceil((nextBirthdayUTC - todayUTC)/86400000);

      const daysLived = Math.max(0, Math.floor((todayUTC - birthUTC)/86400000));

      return { years, months, yPart, mPart, daysToNext, daysLived };
    }

    function render(){
      const dob=dobInput.value.trim();
      if(!/^\d{4}-\d{2}-\d{2}$/.test(dob)){ alert('생년월일을 YYYY-MM-DD 형식으로 입력하세요.'); return; }
      const r=calcAge(dob); if(!r) return;
      const {years,months,yPart,mPart,daysToNext,daysLived}=r;

      document.getElementById('ageMain').textContent=`만 ${years}세`;
      document.getElementById('dday').textContent=`${daysToNext}일`;
      document.getElementById('lived').textContent=`${daysLived.toLocaleString('ko-KR')}일`;
      document.getElementById('ageMonths').textContent=`${months}개월`;
      document.getElementById('ageYearMonth').textContent=`${yPart}세 ${mPart}개월`;
      document.getElementById('ageSemicolon').textContent=`${yPart};${mPart}`;

      document.getElementById('resultWrap').style.display='block';
      document.getElementById('nowKst').textContent = `현재 시각: ${fmtNow.format(new Date())} (KST)`;
    }

    function copyById(id){
      const txt=document.getElementById(id).textContent.trim();
      navigator.clipboard.writeText(txt).then(()=>{
        const btn = id==='ageMain'?document.getElementById('copyAge'):document.querySelector(`[data-copy="${id}"]`);
        if(btn){ const o=btn.textContent; btn.textContent='✅'; setTimeout(()=>btn.textContent=o,900); }
      });
    }

    // 이벤트
    document.getElementById('calcBtn').addEventListener('click',render);
    document.getElementById('resetBtn').addEventListener('click',()=>{
      dobInput.value='';
      document.getElementById('resultWrap').style.display='none';
      closePicker();
    });
    document.getElementById('copyAge').addEventListener('click',()=>copyById('ageMain'));
    document.querySelectorAll('[data-copy]').forEach(b=>b.addEventListener('click',()=>copyById(b.dataset.copy)));

    document.getElementById('year').textContent=new Date().getFullYear();
  </script>
</body>
</html>
